/*
	Falcon.js
	by Rick Allen (stoodder)

	Version 0.10.2
	Full source at https://github.com/stoodder/falconjs
	Copyright (c) 2013 Rick Allen, http://www.stoodder.com

	MIT License, https://github.com/stoodder/falconjs/blob/master/LICENSE.md
*/


(function(){var a,b,c,d,e,f,g,h,i,j,k,l=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};h=function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},e=function(a){return null!=a&&"[object Function]"===Object.prototype.toString.call(a)},b=function(a){return null!=a&&"[object Boolean]"===Object.prototype.toString.call(a)},a=function(a){return null!=a&&"[object Array]"===Object.prototype.toString.call(a)},i=function(a){return null!=a&&"[object String]"===Object.prototype.toString.call(a)},g=function(a){return null!=a&&"[object Number]"===Object.prototype.toString.call(a)},f=function(a){return g(a)&&a!==a},d=function(b){var c,d;if(null==b)return!0;if(i(b))return 0===k(b).length;if(a(b))return 0===b.length;if(h(b)){for(c in b)return d=b[c],!1;return!0}return!1},c="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return null!=a&&1===a.nodeType&&"string"==typeof a.nodeName},k=String.prototype.trim?function(a){return String.prototype.trim.call(a)}:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},j=function(a,b){return 0===a.indexOf(b)},Falcon.addConductor=function(){var a,b,c,f,g,j,m,n;return a=["data-bind"],f={},b=0,c={},m=ko.bindingProvider.instance.preprocessNode,g=function(a,e){var f,g,h,i;return f=null,h=b++,c[h]=function(b){var c,d,f;return d=null,c=null!=(f=ko.bindingProvider.instance.getBindingAccessors(a,b))?f:{},c.view=function(){var c;return null!=d?d:(c=j(a,b),d=e(a,c,b))},null!=(null!=c?c.conductor:void 0)&&delete c.conductor,ko.applyBindingAccessorsToNode(a,c,b)},ko.utils.domNodeDisposal.addDisposeCallback(a,function(){return delete c[h]}),g=k(null!=(i=a.getAttribute("data-bind"))?i:""),g=d(g)?"conductor: "+h:"conductor: "+h+", "+g,a.setAttribute("data-bind",g)},n=function(a){return i(a)?(a=k(a),0===a.indexOf("$view")?!0:0===a.indexOf("$data")?!0:0===a.indexOf("$root")?!0:0===a.indexOf("$parent")?!0:!1):!1},j=function(b,c){var d,e,f,g,h,i,j,k,m;for(e={},k=b.attributes,i=0,j=k.length;j>i;i++)d=k[i],m=d.name.toLowerCase(),l.call(a,m)>=0||(g=d.name,h=d.value,n(h)&&(f="with($context){with($data||{}){return "+h+";}}",h=new Function("$context","$element",f)(c,b)),e[g]=h);return e},ko.bindingProvider.instance.preprocessNode=function(a){var b,c,d,h,i,j;return b=[],1===(null!=a?a.nodeType:void 0)&&(h=k(null!=(i=a.tagName)?i:"").toLowerCase(),c=f[h],null!=c&&(Falcon.isView(c.prototype)?g(a,function(a,b){return new c(b)}):e(c)&&g(a,function(a,b,d){var e;return e=d.$data,c(a,b,e,d)}))),d=null!=(j=null!=m?m.call(this,a):void 0)?j:[],d.length>0?d:null},Falcon.addBinding("conductor",{init:function(a,b,d,e,f){var g;return g=b(),"function"==typeof c[g]&&c[g](f),{controlsDescendantBindings:!0}}}),function(a,b){return a=k(a).toLowerCase(),document.createElement(a),h(b)&&!Falcon.isFalconObject(b)&&(b=Falcon.View.extend(b)),f[a]=b,Falcon}}()}).call(this);